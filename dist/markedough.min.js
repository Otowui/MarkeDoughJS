/*! For license information please see markedough.min.js.LICENSE.txt */
(()=>{"use strict";function e(){e=function(){return o};var t,o={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(e,t,o){e[t]=o.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,o){return e[t]=o}}function f(e,t,o,n){var i=t&&t.prototype instanceof b?t:b,r=Object.create(i.prototype),a=new R(n||[]);return s(r,"_invoke",{value:I(e,o,a)}),r}function h(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}o.wrap=f;var m="suspendedStart",p="suspendedYield",v="executing",y="completed",g={};function b(){}function k(){}function E(){}var w={};d(w,c,(function(){return this}));var S=Object.getPrototypeOf,A=S&&S(S(j([])));A&&A!==i&&r.call(A,c)&&(w=A);var L=E.prototype=b.prototype=Object.create(w);function F(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(i,s,a,c){var l=h(e[i],e,s);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;s(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,i){o(e,n,t,i)}))}return i=i?i.then(r,r):r()}})}function I(e,o,n){var i=m;return function(r,s){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===r)throw s;return{value:t,done:!0}}for(n.method=r,n.arg=s;;){var a=n.delegate;if(a){var c=C(a,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var l=h(e,o,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function C(e,o){var n=o.method,i=e.iterator[n];if(i===t)return o.delegate=null,"throw"===n&&e.iterator.return&&(o.method="return",o.arg=t,C(e,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=h(i,e.iterator,o.arg);if("throw"===r.type)return o.method="throw",o.arg=r.arg,o.delegate=null,g;var s=r.arg;return s?s.done?(o[e.resultName]=s.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,g):s:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var o=e[c];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function o(){for(;++i<e.length;)if(r.call(e,i))return o.value=e[i],o.done=!1,o;return o.value=t,o.done=!0,o};return s.next=s}}throw new TypeError(n(e)+" is not iterable")}return k.prototype=E,s(L,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:k,configurable:!0}),k.displayName=d(E,u,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},o.awrap=function(e){return{__await:e}},F(x.prototype),d(x.prototype,l,(function(){return this})),o.AsyncIterator=x,o.async=function(e,t,n,i,r){void 0===r&&(r=Promise);var s=new x(f(e,t,n,i),r);return o.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},F(L),d(L,u,"Generator"),d(L,c,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},o.values=j,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var o in this)"t"===o.charAt(0)&&r.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var o=this;function n(n,i){return a.type="throw",a.arg=e,o.next=n,i&&(o.method="next",o.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),O(o),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var i=n.arg;O(o)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,o,n){return this.delegate={iterator:j(e),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=t),g}},o}function t(e,t,o,n,i,r,s){try{var a=e[r](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function o(e){return function(){var o=this,n=arguments;return new Promise((function(i,r){var s=e.apply(o,n);function a(e){t(s,i,r,a,c,"next",e)}function c(e){t(s,i,r,a,c,"throw",e)}a(void 0)}))}}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,i,r,s,a=[],c=!0,l=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=r.call(o)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=o.return&&(s=o.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var u,d,f,h=function(){function t(e,o,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.mktoDomain=e,this.mktoID=o,this.formID=n,this.options=i,this.form=null}return s=t,a=[{key:"init",value:function(){this.attachMktoEvents()}},{key:"attachMktoEvents",value:function(){var e=this;if(!window.MktoForms2)return console.error("⚠️ MktoForms2 is not available. Retrying..."),void setTimeout((function(){return e.attachMktoEvents()}),500);MktoForms2.whenRendered((function(t){e.options.debug&&console.debug("✅ Form ".concat(e.formID," is rendered.")),e.onFormRendered(t)})),MktoForms2.whenReady((function(t){e.options.debug&&console.debug("✅ Form ".concat(e.formID," is fully loaded.")),e.onFormReady(t)}))}},{key:"onFormRendered",value:function(e){this.options.debug&&console.debug("⚡️ Running onFormRendered() modifications on ".concat(this.formID,"."))}},{key:"onFormReady",value:function(e){var t=this;this.form=e,this.options.debug&&console.debug("⚡️ Running onFormReady() modifications on ".concat(this.formID,".")),this.formSubmitting=!1,this.formSubmitted=!1,this.cleanUpMktoElements(e),this.setupCSSReset(e),this.hideSpecifiedElements(e),this.addCssHelpers(e),this.hideLabelsForFields(e),this.processCheckboxOptions(),this.processRadioOptions(),this.replaceTokensInForm(e),this.initCustomLabels(e),this.refactorNumberInputs(e),this.options.dto?this.setupPrefill(e):this.setupUpIntlTelInput(e),this.processUrlParams(e),this.applyTranslations(e),this.setupUploadCare(e),this.executeCustomBehaviorsOnFormReady(e),this.showForm(e),this.setupDeactivation(e),this.options.dataLayerConfig.trackFormReady&&this.pushToDataLayer(this.options.dataLayerConfig.eventName+"Ready"),this.options.clearMunchkin&&this.form.addHiddenFields({_mkt_trk:"",mkt_tok:""}),e.onValidate((function(o){if(t.options.debug&&console.log("🚀 Validating form before submission..."),t.formSubmitting)console.warn("⚠️ Preventing duplicate validation.");else{t.formSubmitting=!0,e.submittable(!1);var n=[];if(t.options.intlTelInput&&t.options.intlTelInputFields&&Array.isArray(t.options.intlTelInputFields)){var i=e.getFormElem()[0];t.options.intlTelInputFields.forEach((function(e){var t=i.querySelector('[name="'.concat(e,'"]'));if(t&&t.intlTelInputInstance){var o=t.intlTelInputInstance.getNumber();console.debug("📞 Formatted Phone Number for ".concat(e,": ").concat(o)),t.value=o}else console.warn("⚠️ intlTelInput instance not found for: ".concat(e))}))}t.options.honeypot&&n.push(t.setupHoneypotValidation(e)),t.options.emailVerify&&n.push(t.setupEmailValidation(e)),Promise.all(n).then((function(o){if(!o.every((function(e){return e})))return console.error("⛔ Validation failed. Submission blocked."),void(t.formSubmitting=!1);console.log("✅ Final submittable state: true"),e.submittable(!0),setTimeout((function(){e.getFormElem()[0].checkValidity()?(t.options.debug&&console.log("✅ All validations passed, submitting form..."),e.getFormElem()[0].dispatchEvent(new Event("submit",{bubbles:!0}))):(console.warn("⚠️ Form still invalid, submission blocked."),t.formSubmitting=!1)}),100)})).catch((function(o){console.error("⚠️ Validation error:",o),e.submittable(!1),t.formSubmitting=!1}))}})),e.onSubmit((function(e){t.options.clearMunchkin&&t.form.vals({_mkt_trk:"",mkt_tok:""}),setTimeout((function(){t.submissionTriggered=!1}),500)})),e.onSuccess((function(o,n){if(t.formSubmitted)return console.warn("⚠️ Preventing duplicate success handling."),!1;if(t.formSubmitted=!0,t.options.debug&&console.log("🚀 Form submission successful. Handling follow-up..."),t.executeCustomBehaviorsOnFormSuccess(e),!t.options.followUp)return!0;if(t.options.followUpUrl)return console.log("🔗 Redirecting to follow-up URL: ".concat(t.options.followUpUrl)),setTimeout((function(){window.location.href=t.options.followUpUrl}),500),!1;if(t.options.followUpMsg){var i=e.getFormElem()[0];i.style.display="none";var r=document.createElement("div");return r.innerHTML=t.options.followUpMsg,i.parentElement.appendChild(r),console.log("Displayed follow-up message instead of redirection."),!1}}))}},{key:"hideForm",value:function(e){e.getFormElem()[0].style.display="none",this.options.debug&&console.debug("Form ".concat(this.formID," is now hidden."))}},{key:"showForm",value:function(e){var t=e.getFormElem()[0];t.style.display="",t.parentElement&&t.parentElement.style.removeProperty("display"),this.options.debug&&console.debug("Form ".concat(this.formID," is now visible."))}},{key:"setupCSSReset",value:function(e){if(this.options.cssReset){var t=e.getFormElem()[0];this.removeInlineStyles(t),this.disableMarketoStyles(t),this.removeEmbeddedStyles(t),this.removeMktoHasWidth(t),this.injectStylesheet(),this.options.moreStyles||t.setAttribute("data-style","oto"),this.observeMktoFormStyles(t),this.options.debug&&console.debug("CSS Reset applied to Form ".concat(this.formID))}}},{key:"injectStylesheet",value:function(){var e=this;(this.options.cssStylesheet||this.options.cssStyle||this.options.cssInlineStyle)&&((this.options.cssStyle&&Object.keys(this.options.cssStyle).length>0||this.options.cssInlineStyle&&""!==this.options.cssInlineStyle.trim())&&this.injectCSSVariables(),Array.isArray(this.options.cssStylesheet)&&this.options.cssStylesheet.forEach((function(t){if(!document.querySelector('link[href="'.concat(t,'"]'))){var o=document.createElement("link");o.rel="stylesheet",o.href=t,document.head.appendChild(o),e.options.debug&&console.log("Applied external CSS: ".concat(t))}})))}},{key:"injectCSSVariables",value:function(){if(!document.getElementById("otoFormCustomStyles")){var e=":root {\n";if(this.options.cssStyle&&Object.keys(this.options.cssStyle).length>0)for(var t=0,o=Object.entries(this.options.cssStyle);t<o.length;t++){var n=r(o[t],2),i=n[0],s=n[1];e+="  --otoform-".concat(i,": ").concat(s,";\n")}e+="}",this.options.cssInlineStyle&&"string"==typeof this.options.cssInlineStyle&&""!==this.options.cssInlineStyle.trim()&&(e+="\n".concat(this.options.cssInlineStyle));var a=document.createElement("style");a.id="otoFormCustomStyles",a.textContent=e,document.head.appendChild(a),this.options.debug&&console.log("Injected CSS Variables & Inline Styles:",{variables:this.options.cssStyle,inlineStyles:this.options.cssInlineStyle})}}},{key:"removeEmbeddedStyles",value:function(e){var t=e.querySelectorAll("style");t.forEach((function(e){return e.remove()})),this.options.debug&&console.debug("Removed ".concat(t.length," embedded <style> tags inside the form."))}},{key:"removeInlineStyles",value:function(e){Array.from(e.querySelectorAll("[style]")).forEach((function(e){e.closest(".mktoHtmlText")&&!e.classList.contains("mktoHtmlText")||e.removeAttribute("style")})),e.closest(".mktoHtmlText")||e.removeAttribute("style")}},{key:"removeMktoHasWidth",value:function(e){var t=e.querySelectorAll(".mktoHasWidth");e.classList.contains("mktoHasWidth")&&e.classList.remove("mktoHasWidth"),t.forEach((function(e){return e.classList.remove("mktoHasWidth")})),this.options.debug&&console.debug("Removed .mktoHasWidth from ".concat(t.length+(e.classList.contains("mktoHasWidth")?1:0)," elements."))}},{key:"disableMarketoStyles",value:function(e){var t=this;try{Array.from(document.styleSheets).forEach((function(o){try{(o.href&&o.href.includes("forms2")||e.contains(o.ownerNode))&&(o.disabled=!0)}catch(e){t.options.debug&&console.warn("⚠️ Could not access stylesheet:",e)}}))}catch(e){this.options.debug&&console.warn("⚠️ Error disabling Marketo styles:",e)}}},{key:"addCssHelpers",value:function(e){var t=this;if(this.options.cssReset){var o=e.getFormElem()[0];o.querySelectorAll("fieldset").forEach((function(e){var o=e.querySelector("legend");if(o&&o.textContent.trim()){var n=t.slugify(o.textContent.trim()),i=e.closest(".mktoFormRow"),r=e.closest(".mktoFormCol");i&&i.classList.add("otoform-row-fieldset-".concat(n)),r&&r.classList.add("otoform-col-fieldset-".concat(n)),t.options.debug&&console.log('Added fieldset class "otoform-row-fieldset-'.concat(n,'"'))}})),o.querySelectorAll(".mktoFormRow").forEach((function(e){if(!e.querySelector("fieldset")){var o=e.querySelectorAll("input, select, textarea"),n=new Set(i(o).map((function(e){return t.slugify(e.name||"")})));n.size&&(e.classList.add("otoform-row-".concat(i(n).join("-"))),t.options.debug&&console.log('Added class "otoform-row-'.concat(i(n).join("-"),'" to row.')))}})),o.querySelectorAll(".mktoFormCol").forEach((function(e){if("fieldset"!==e.tagName.toLowerCase()){var o=e.querySelector("input, select, textarea");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-col-".concat(n)),t.options.debug&&console.log('Added class "otoform-col-'.concat(n,'" to column.')))}}})),o.querySelectorAll(".mktoFieldWrap").forEach((function(e){var o=e.querySelector("input, select, textarea");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-field-".concat(n)),t.options.debug&&console.log('Added class "otoform-field-'.concat(n,'" to field wrapper.')))}})),o.querySelectorAll(".mktoCheckboxList").forEach((function(e){var o=e.querySelector("input[type='checkbox']");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-checkboxlist-".concat(n)),t.options.debug&&console.log('Added class "otoform-checkboxlist-'.concat(n,'" to checkbox list.')))}})),o.querySelectorAll(".mktoRadioList").forEach((function(e){var o=e.querySelector("input[type='radio']");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-radiolist-".concat(n)),t.options.debug&&console.log('Added class "otoform-radiolist-'.concat(n,'" to radio list.')))}})),o.querySelectorAll(".mktoCheckboxList").forEach((function(e){var o=e.querySelectorAll("label");if(Array.from(o).some((function(e){return""===e.textContent.trim()&&""===e.innerHTML.trim()}))){var n=e.closest(".mktoFieldWrap");n&&(n.classList.add("otoform-single-checkbox"),t.options.debug&&console.log('Added class "otoform-single-checkbox" to field wrap.'))}})),this.options.debug&&console.log("CSS helpers added to form.")}}},{key:"observeMktoFormStyles",value:function(e){var t=this;new MutationObserver((function(o){o.forEach((function(o){"style"===o.attributeName&&e.style.width&&(e.style.removeProperty("width"),t.options.debug&&console.debug("Removed inline width style from .mktoForm"))}))})).observe(e,{attributes:!0,attributeFilter:["style"]}),this.options.debug&&console.debug("MutationObserver started to prevent Marketo from injecting inline width.")}},{key:"setupUpIntlTelInput",value:function(e){var t=this;if(this.options.intlTelInput)if("function"==typeof window.intlTelInput){var o=e.getFormElem()[0],n=this.options.intlTelInputConfig||{},i=function(e){return"1"===e||1===e||!0===e},r={initialCountry:n.initialCountry||"auto",strictMode:i(n.strictMode),nationalMode:i(n.nationalMode),geoIpLookup:i(n.geoIpLookup)?function(e){fetch(n.geoIpLookupApi||"https://ipinfo.io/json?token=InsertApiKeyHere").then((function(e){return e.json()})).then((function(t){e(t[n.geoIpLookupApiResponseKey]||n.geoIpLookupApiResponseFallback||"us")})).catch((function(){e(n.geoIpLookupApiResponseFallback||"us")}))}:null,allowDropdown:i(n.allowDropdown),showFlags:i(n.showFlags),separateDialCode:i(n.separateDialCode)};if(this.options.debug&&console.log("IntlTelInput configuration:",r),this.options.intlTelInputFields&&Array.isArray(this.options.intlTelInputFields)&&this.options.intlTelInputFields.forEach((function(e){var n=o.querySelector('[name="'.concat(e,'"]'));n?(n.intlTelInputInstance=window.intlTelInput(n,r),t.options.debug&&console.log("intlTelInput initialized for field: ".concat(e))):t.options.debug&&console.warn("Field not found for intlTelInput: ".concat(e))})),n.CountrySync&&n.CountrySyncSelector){var s=o.querySelector('[name="'.concat(n.CountrySyncSelector,'"]'));if(s){var a=window.intlTelInput.getCountryData();s.innerHTML="",a.forEach((function(e){var t=document.createElement("option");t.value=e.iso2,t.text=e.name,s.appendChild(t)}));var c=this.options.intlTelInputFields[0],l=o.querySelector('[name="'.concat(c,'"]'));if(l&&l.intlTelInputInstance){var u=l.intlTelInputInstance;s.value=u.getSelectedCountryData().iso2,l.addEventListener("countrychange",(function(){s.value=u.getSelectedCountryData().iso2})),s.addEventListener("change",(function(){u.setCountry(s.value)}))}}else this.options.debug&&console.warn("Country Sync Selector element not found: ".concat(n.CountrySyncSelector))}}else this.options.debug&&console.error("intlTelInput library not loaded.")}},{key:"setupUploadCare",value:function(e){if(this.options.uploadCare){this.options.debug&&console.log("⚡️ Setting up UploadCare");var t,o,n=e.getFormElem()[0];if(this.options.uploadCareTarget){var i=this.options.uploadCareTarget,r=(t=this.options.uploadCareConfig,(o=document.createElement("textarea")).innerHTML=t,o.value),s=n.querySelector('[name="'.concat(i,'"]'));if(s.classList.add("oto-visually-hidden"),(null==s?void 0:s.closest(".mktoFieldWrap")).classList.add("oto-force-space-bottom"),!document.querySelector("uc-file-uploader-minimal")||!document.querySelector("uc-file-uploader-regular")){var a,c=document.createElement("div");c.classList.add("mktoFormRow"),c.classList.add("otoform-row-uploadcare"),c.innerHTML="".concat(r,'<uc-upload-ctx-provider ctx-name="my-uploader"></uc-upload-ctx-provider>');var l=null===(a=n.querySelector('[name="'.concat(i,'"]')))||void 0===a?void 0:a.closest(".mktoFormRow");l?l.insertAdjacentElement("afterend",c):n.insertAdjacentElement("afterend",c)}var u=document.querySelector("uc-upload-ctx-provider[ctx-name='my-uploader']");if(!u)return void console.error("Uploadcare context provider element not found!");u.addEventListener("common-upload-success",(function(e){var t=e.detail.successEntries;if(t&&0!==t.length){var o=t.map((function(e){return e.cdnUrl}));console.log("Files Uploaded:",o),s.value=o.join(", ")}}))}}}},{key:"setupDeactivation",value:function(e){if(this.options.deactivate){var t=e.getFormElem()[0],o=t.parentElement;if(t.style.display="none",this.options.deactivateMessage){var n=document.createElement("div");n.innerHTML=this.options.deactivateMessage,o.appendChild(n)}this.options.debug&&console.debug("Form ".concat(this.formID," is deactivated and replaced with a message."))}}},{key:"setupPrefill",value:function(e){var t=this;if(this.options.dto){var o=this.options.dtoSrc,n=this.options.dtoOriginUrl,i=this.options.dtoTargetUrls;if(o&&n&&i&&Array.isArray(i)){this.options.debug&&console.log("Initializing SimpleDTO for form prefill...");var r=new SimpleDTO({debug:this.options.debug,mode:"receive",transport:"message",messageSource:n,messageTarget:i,dataSrc:o,cb:function(o,n){t.options.debug&&console.debug("🗂️ Marketo Fields received:",n),e.setValuesCoerced(n),t.onPrefillReadyTriggerLeadActions(e,n),r.cleanup()}})}else this.options.debug&&console.warn("⚠️ DTO configuration is incomplete. Prefill aborted.")}}},{key:"onPrefillReadyTriggerLeadActions",value:function(e,t){this.options.debug&&console.log("⚡️Lead actions triggered after DTO prefill"),this.setupUpIntlTelInput(e),this.executeCustomBehaviorsOnFormPrefill(e),this.options.notYou&&t.Email&&this.setupNotYouButton()}},{key:"setupEmailValidation",value:function(e){var t=this;return new Promise((function(o){if(!t.options.emailVerify||!t.options.emailVerifyAPI)return o(!0);var n=t.options.emailVerifyAPI,i=n.fieldName||"Email",s=e.getFormElem()[0].querySelector('[name="'.concat(i,'"]'));if(!s)return t.options.debug&&console.warn("⚠️ Email field not found: ".concat(i)),o(!0);if(!s.value||!s.value.includes("@")||!s.value.includes("."))return t.markInvalid(s,"Invalid email format."),o(!1);var a=t,c=Object.keys(n.action)[0]||"verify",l=n.action[c]||{},u={checkMX:"checkmx",checkCustomBlacklist:"checkblacklist",checkFreeEmails:"checkfreelist",checkDisposableEmails:"checkdisposablelist",checkWhitelist:"checkwhitelist"},d=Object.entries(l).filter((function(e){var t=r(e,2),o=t[0],n=t[1];return void 0!==u[o]&&"boolean"==typeof n})).map((function(e){var t=r(e,2),o=t[0],n=t[1];return"".concat(u[o],"=").concat(n?"true":"false")})).join("&"),f="".concat(n.endpoint,"?key=").concat(n.hash,"&action=").concat(c,"&").concat(d,"&eml=").concat(encodeURIComponent(s.value)),h=new XMLHttpRequest;h.open("GET",f,!0),h.responseType="json",h.onload=function(){if(200===h.status){var t=h.response;if(console.debug("🚀 Email Validation API Response: ".concat(JSON.stringify(t,null,2))),t&&Array.isArray(t)&&t.length>0){var n=t[0];"1"===n.valid?(e.submittable(!0),a.markValid(s),o(!0)):(console.error("🚨 Invalid Email Detected: ".concat(n.msg)),e.submittable(!1),a.markInvalid(s,n.msg),o(!1))}else console.error("⚠️ Invalid API response format:",t),o(!0)}else console.error("⚠️ Validation API error:",h.status,h.statusText),o(!0)},h.onerror=function(){console.error("⚠️ Network error during email validation."),o(!0)},h.send()}))}},{key:"validateEmailField",value:function(e,t){var o=this;return new Promise((function(n){if(!e.value||!e.value.includes("@")||!e.value.includes("."))return o.markInvalid(e,"Invalid email format."),t.submittable(!1),n(!1);var i=o,s=o.options.emailVerifyAPI,a=Object.keys(s.action)[0]||"verify",c=s.action[a]||{},l={checkMX:"checkmx",checkCustomBlacklist:"checkblacklist",checkFreeEmails:"checkfreelist",checkDisposableEmails:"checkdisposablelist",checkWhitelist:"checkwhitelist"},u=Object.entries(c).filter((function(e){var t=r(e,2),o=t[0],n=t[1];return void 0!==l[o]&&"boolean"==typeof n})).map((function(e){var t=r(e,2),o=t[0],n=t[1];return"".concat(l[o],"=").concat(n?"true":"false")})).join("&"),d="".concat(s.endpoint,"?key=").concat(s.hash,"&action=").concat(a,"&").concat(u,"&eml=").concat(encodeURIComponent(e.value)),f=new XMLHttpRequest;f.open("GET",d,!0),f.responseType="json",f.onload=function(){if(200===f.status){var o;try{o=f.response}catch(e){return console.error("❌ JSON Parsing Error:",e),t.submittable(!1),n(!1)}if(console.debug("🚀 Email Validation API Response:",JSON.stringify(o,null,2)),o&&Array.isArray(o)&&o.length>0){var r=o[0];"1"===r.valid?(i.markValid(e),t.submittable(!0),n(!0)):(console.warn("🚨 Invalid Email Detected:",r.msg),i.markInvalid(e,r.msg||"Please enter a valid company email."),t.submittable(!1),n(!1))}else console.error("❌ Unexpected API Response Format:",o),t.submittable(!1),n(!1)}else console.error("❌ API Request Failed:",f.status,f.statusText),t.submittable(!1),n(!1)},f.onerror=function(){console.error("❌ Network Error During Email Validation."),t.submittable(!1),n(!1)},f.send()}))}},{key:"setupErrorHideEvents",value:function(){var e=document.querySelector(".mktoForm");if(e){var t=function(){e.querySelectorAll(".mktoError").forEach((function(e){e.style.opacity="0",setTimeout((function(){return e.remove()}),300)})),e.querySelectorAll(".customInvalid").forEach((function(e){e.classList.remove("customInvalid","mktoInvalid")})),e.removeEventListener("click",t)};e.addEventListener("click",t)}}},{key:"markValid",value:function(e){e.classList.remove("customInvalid","mktoInvalid"),e.classList.add("mktoValid"),e.setAttribute("aria-invalid","false"),MktoForms2.$(e).siblings(".mktoError").remove(),this.options.debug&&console.log("Validation passed for ".concat(e.name))}},{key:"markInvalid",value:function(e,t){var o=this;e.classList.add("customInvalid","mktoInvalid"),e.classList.remove("mktoValid"),e.setAttribute("aria-invalid","true");var n=e.parentElement.querySelector(".mktoError");n&&n.remove();var i=document.createElement("div");i.classList.add("mktoError"),i.style.opacity="0",i.style.transition="opacity 0.3s ease-in-out";var r=document.createElement("div");r.classList.add("mktoErrorArrowWrap");var s=document.createElement("div");s.classList.add("mktoErrorArrow");var a=document.createElement("div");a.classList.add("mktoErrorMsg"),a.setAttribute("id","ValidMsgTitle"),a.setAttribute("role","alert"),a.setAttribute("tabindex","-1"),a.textContent=t,r.appendChild(s),i.appendChild(r),i.appendChild(a),e.parentElement.appendChild(i),requestAnimationFrame((function(){e.getBoundingClientRect(),i.getBoundingClientRect(),i.style.position="absolute",i.style.top="".concat(e.offsetTop+e.offsetHeight+5,"px"),i.style.left="".concat(e.offsetLeft+e.offsetWidth/2,"px"),i.style.transform="translateX(-50%)",i.style.zIndex="10",requestAnimationFrame((function(){i.style.opacity="1"})),o.options.debug&&console.warn("Validation failed: ".concat(t))})),this.setupErrorHideEvents()}},{key:"hideSpecifiedElements",value:function(e){var t=this,o=e.getFormElem()[0];this.options.hideFields&&Array.isArray(this.options.hideFields)&&this.options.hideFields.forEach((function(e){var n=o.querySelector('[name="'.concat(e,'"]'));if(n){var i=n.closest(".mktoFormRow");i&&(i.classList.add("oto-hidden"),t.options.debug&&console.log("⚡️ Hiding row for field: ".concat(e)))}else t.options.debug&&console.warn("Field not found for hiding: ".concat(e))})),this.options.hideFieldsets&&Array.isArray(this.options.hideFieldsets)&&this.options.hideFieldsets.forEach((function(e){o.querySelectorAll("legend").forEach((function(o){if(o.textContent.trim().toLowerCase()===e.toLowerCase()){var n=o.closest(".mktoFormRow");n&&(n.classList.add("oto-hidden"),t.options.debug&&console.log('⚡️ Hiding fieldset with legend: "'.concat(e,'"')))}}))})),this.options.hideLegends&&o.querySelectorAll("legend").forEach((function(e){e&&(e.classList.add("oto-hidden"),t.options.debug&&console.log('⚡️ Hiding legend: "'.concat(e.textContent.trim(),'"')))}))}},{key:"hideLabelsForFields",value:function(e){var t=this;if(this.options.hideLabels&&Array.isArray(this.options.hideLabels)){var o=e.getFormElem()[0];this.options.hideLabels.forEach((function(e){var n;switch(e){case"text":case"url":case"number":case"email":case"tel":case"date":case"textarea":n='input[type="'.concat(e,'"], textarea'),o.querySelectorAll(n).forEach((function(e){t.hideLabelForInput(e)}));break;case"select":n="select",o.querySelectorAll(n).forEach((function(e){t.hideLabelForInput(e)}));break;case"checkboxlist":o.querySelectorAll(".mktoCheckboxList").forEach((function(e){t.hideAssociatedLabel(e)}));break;case"radiolist":o.querySelectorAll(".mktoRadioList").forEach((function(e){t.hideAssociatedLabel(e)}));break;default:return}}))}}},{key:"hideLabelForInput",value:function(e){var t=e.id?document.querySelector('label[for="'.concat(e.id,'"]')):null;t&&(t.classList.add("visually-hidden"),this.options.debug&&console.log("⚡️ Hiding label for input:",e.name))}},{key:"hideAssociatedLabel",value:function(e){var t,o=e.querySelector("input");if(o&&o.name){var n=null===(t=e.closest(".mktoFieldWrap"))||void 0===t?void 0:t.querySelector('label[for="'.concat(o.name,'"]'));n&&(n.classList.add("visually-hidden"),this.options.debug&&console.log("⚡️ Hiding label for list with name:",o.name))}}},{key:"setupHoneypotValidation",value:function(e){var t=this;return new Promise((function(o){var n=t.options.honeypot;if(!n)return o(!0);var i=e.getFormElem()[0].querySelector('[name="'.concat(n,'"]'));if(!i)return t.options.debug&&console.warn("⚠️ Honeypot field not found: ".concat(n)),o(!0);""===i.value.trim()?(t.options.debug&&console.log("✅ Honeypot validation passed (empty field)."),o(!0)):(t.options.debug&&console.warn("🚨 Honeypot triggered! Submission blocked."),o(!1))}))}},{key:"setupNotYouButton",value:function(){var e=this;if(this.options.notYou&&this.options.notYouHtml&&this.options.notYouAfterElem){var t=document.querySelector(this.options.notYouAfterElem);if(t){var o=document.createElement("div");o.innerHTML=this.options.notYouHtml,t.insertAdjacentElement("afterend",o),this.options.debug&&console.log('⚡️ Injected "Not You?" button after: '.concat(this.options.notYouAfterElem));var n=document.querySelector("#not-you-button");n&&n.addEventListener("click",(function(t){t.preventDefault(),e.notYouHandler()}))}else this.options.debug&&console.warn('⚠️ Target element for "Not You?" not found: '.concat(this.options.notYouAfterElem))}}},{key:"notYouHandler",value:function(){this.options.debug&&console.log("⚡️ Not You? button clicked. Clearing Marketo tracking cookie."),FormsPlus.util.DNS.climbDomains([],(function(e){FormsPlus.util.Cookies.remove(FormsPlus.strings.MARKETO_TRACKING_COOKIE,{domain:e,path:"/"})}));var e=new FormsPlus.util.URI.URI;e.removeSearch([FormsPlus.strings.MARKETO_EMAIL_ASSOCIATOR_TOKEN,FormsPlus.strings.MARKETO_FORM_DATA_CACHE]),document.location.href=e}},{key:"refactorNumberInputs",value:function(e){var t=this;if(this.options.numberRefactore&&this.options.numberRefactoreItems){var o=e.getFormElem()[0];Object.entries(this.options.numberRefactoreItems).forEach((function(e){var n=r(e,2),i=n[0],s=n[1],a=o.querySelector('input[name="'.concat(i,'"][type="number"]'));if(a){var c="any"===s?"any":parseFloat(s)||1,l=a.getAttribute("min")||"",u=a.getAttribute("max")||"",d=a.value||"",f=document.createElement("span");f.classList.add("oto-num-stepper");var h=document.createElement("button");h.setAttribute("type","button"),h.textContent="−",h.addEventListener("click",(function(){return t.stepperInput(a,-c,l)}));var m=document.createElement("button");m.setAttribute("type","button"),m.textContent="+",m.addEventListener("click",(function(){return t.stepperInput(a,c,u)})),a.setAttribute("step",c),a.setAttribute("min",l),a.setAttribute("max",u),a.setAttribute("readonly","true"),a.value=d,a.parentNode.insertBefore(f,a),f.appendChild(h),f.appendChild(a),f.appendChild(m),t.options.debug&&console.log('✅ Refactored number input "'.concat(i,'" with step ').concat(c,"."))}else t.options.debug&&console.warn('⚠️ Number input "'.concat(i,'" not found.'))}))}}},{key:"stepperInput",value:function(e,t,o){var n=parseFloat(e.value)||0,i=("any"===e.getAttribute("step")||parseFloat(e.getAttribute("step")),e.getAttribute("min")?parseFloat(e.getAttribute("min")):-1/0),r=e.getAttribute("max")?parseFloat(e.getAttribute("max")):1/0,s=n+t;s<i&&(s=i),s>r&&(s=r),e.value=s}},{key:"processRadioOptions",value:function(){var e=this,t=document.querySelector(".mktoForm");if(t)return!this.options.radios||Array.isArray(this.options.radios)&&0===this.options.radios.length?(t.querySelectorAll(".mktoRadioList").forEach((function(e){e.classList.contains("otoform-default-radios")||e.classList.add("otoform-default-radios")})),void(this.options.debug&&console.warn("⚠️ No specific radio configurations found. Applied 'otoform-default-radios' to all radio lists."))):void Object.keys(this.options.radios).forEach((function(o){var n=e.options.radios[o],i=t.querySelectorAll('input[name="'.concat(o,'"]'));0!==i.length?i.forEach((function(t){var i=t.closest(".mktoRadioList");i&&(n.style||n.inline||i.classList.add("otoform-default-radios"),n.inline&&i.classList.add("otoform-inline-radios"),"tabs"===n.style?i.classList.add("otoform-tabs-radios"):"square"===n.style?i.classList.add("otoform-square-radios"):i.classList.add("otoform-default-radios"),e.options.debug&&console.log('⚡️ Processed radio group "'.concat(o,'" with style: ').concat(n.style||"default")))})):e.options.debug&&console.warn("⚠️ No radios found for group: ".concat(o))}))}},{key:"processCheckboxOptions",value:function(){var e=this,t=document.querySelector(".mktoForm");if(t)return!this.options.checkBoxes||Array.isArray(this.options.checkBoxes)&&0===this.options.checkBoxes.length?(t.querySelectorAll(".mktoCheckboxList").forEach((function(e){e.classList.contains("otoform-default-checkboxes")||e.classList.add("otoform-default-checkboxes")})),void(this.options.debug&&console.warn("⚠️ No specific checkbox configurations found. Applied 'otoform-default-checkboxes' to all checkbox lists."))):void Object.keys(this.options.checkBoxes).forEach((function(o){var n=e.options.checkBoxes[o],i=t.querySelectorAll('input[name="'.concat(o,'"]'));0!==i.length?i.forEach((function(t){var i=t.closest(".mktoCheckboxList");i&&(n.style||n.inline||n.behavior||i.classList.add("otoform-default-checkboxes"),n.inline&&i.classList.add("otoform-inline-checkboxes"),"round"===n.style||"square"===n.style?e.initSwitches(t,n.style):i.classList.add("otoform-default-checkboxes"),"actAsRadio"===n.behavior&&e.initializeCheckboxGroupAsRadio(o))})):e.options.debug&&console.warn("⚠️ No checkboxes found for group: ".concat(o))}))}},{key:"initSwitches",value:function(e,t){var o=e.closest(".mktoCheckboxList");if(o){o.classList.contains("otoform-switches")?o.classList.add("otoform-classic"):o.classList.add("otoform-switches");var n=document.createElement("label");n.classList.add("otoform-switch"),e.parentNode.insertBefore(n,e),n.appendChild(e);var i=document.createElement("span");i.classList.add("otoform-slider","otoform-slider-".concat(t)),n.appendChild(i),this.options.debug&&console.log("Applied ".concat(t," switch styling to checkbox:"),e.name)}}},{key:"initializeCheckboxGroupAsRadio",value:function(e){var t=document.querySelectorAll('input[name="'.concat(e,'"]'));if(0!==t.length){t.forEach((function(e){e.addEventListener("click",(function(){t.forEach((function(t){t!==e&&(t.checked=!1)}))}))}));var o=Array.from(t).find((function(e){return e.checked}));o&&t.forEach((function(e){e!==o&&(e.checked=!1)})),this.options.debug&&console.log("Initialized radio-like behavior for checkbox group: ".concat(e))}}},{key:"replaceTokensInForm",value:function(e){var t=this;this.options.updateTokens&&"object"===n(this.options.updateTokens)&&e.getFormElem()[0].querySelectorAll("*:not(script):not(style)").forEach((function(e){Object.keys(t.options.updateTokens).forEach((function(o){var n=t.options.updateTokens[o];1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.includes(o)&&(e.textContent=e.textContent.replace(o,n),t.options.debug&&console.log('Replaced token "'.concat(o,'" in element:'),e)),e.hasAttribute("value")&&e.getAttribute("value").includes(o)&&(e.setAttribute("value",e.getAttribute("value").replace(o,n)),t.options.debug&&console.log('Replaced token "'.concat(o,'" in input value:'),e)),e.hasAttribute("placeholder")&&e.getAttribute("placeholder").includes(o)&&(e.setAttribute("placeholder",e.getAttribute("placeholder").replace(o,n)),t.options.debug&&console.log('Replaced token "'.concat(o,'" in placeholder:'),e))}))}))}},{key:"initCustomLabels",value:function(e){var t=this;if(this.options.customLabels&&"object"===n(this.options.customLabels)){var o=e.getFormElem()[0];Object.entries(this.options.customLabels).forEach((function(e){var n=r(e,2),i=n[0],s=n[1];if(i&&s){var a=o.querySelector('label[for="'.concat(i,'"]'));a?(a.innerHTML=s,t.options.debug&&console.log('Updated label for "'.concat(i,'" with custom content.'))):t.options.debug&&console.warn('Label with for="'.concat(i,'" not found.'))}}))}}},{key:"applyTranslations",value:function(e){var t=this;if(this.options.translate&&"json"===this.options.translate){var o=document.documentElement.lang||"en",n="".concat(this.options.translateJson.folder).concat(o,".json");this.options.debug&&console.log("Loading translations from: ".concat(n)),fetch(n).then((function(e){return e.json()})).then((function(e){Object.keys(e).forEach((function(o){document.querySelectorAll(o).forEach((function(n){["INPUT","TEXTAREA"].includes(n.tagName)||(n.textContent=e[o],t.options.debug&&console.log("Translated ".concat(o,' → "').concat(e[o],'"'))),n.hasAttribute("placeholder")&&e[o].placeholder&&(n.setAttribute("placeholder",e[o].placeholder),t.options.debug&&console.log("Translated placeholder for ".concat(o,' → "').concat(e[o].placeholder,'"')))}))})),t.options.debug&&console.log("Translations applied for language: ".concat(o))})).catch((function(e){console.error("Failed to load translations: ".concat(e))}))}}},{key:"cleanUpMktoElements",value:function(e){var t=this;if(Array.isArray(this.options.removeElems)&&0!==this.options.removeElems.length){var o=e.getFormElem()[0];this.options.removeElems.forEach((function(e){var n=o.querySelectorAll(e);n.forEach((function(e){return e.remove()})),t.options.debug&&n.length&&console.log("Removed ".concat(n.length,' elements matching: "').concat(e,'"'))}))}}},{key:"processUrlParams",value:function(e){var t=this;if(this.options.urlParamsToHiddenFields){var o=this.options.urlParamsToHiddenFieldsConfig;if(o&&"object"===n(o)){var i=e.getFormElem()[0],s=new URLSearchParams(window.location.search),a={};Object.entries(o.mapping).forEach((function(e){var n=r(e,2),i=n[0],c=n[1];if(!o.excludeList.includes(i)){var l=null;if(o.cookiesFirst&&o.cookiesFirst.prefix){var u="".concat(o.cookiesFirst.prefix).concat(i);l=t.getCookie(u)}l||(l=s.get(i)),l&&(a[c]=l)}})),Object.entries(a).forEach((function(e){var o=r(e,2),n=o[0],s=o[1],a=i.querySelector('input[name="'.concat(n,'"]'));a||((a=document.createElement("input")).type="hidden",a.name=n,i.appendChild(a)),a.value=s,t.options.debug&&console.log('Set hidden field "'.concat(n,'" with value: ').concat(s))}))}}}},{key:"setupToggleDisabling",value:function(e){var t=this,o=e.getFormElem()[0];this.options.radios&&Object.keys(this.options.radios).forEach((function(e){var n=t.options.radios[e];if("toggleDisabling"===n.behavior){var i=o.querySelectorAll('input[name="'.concat(e,'"]'));if(i.length){var r=Array.from(i).find((function(e){return e.value===n.relations.yesValue})),s=Array.from(i).find((function(e){return e.value===n.relations.noValue})),a=o.querySelectorAll('input[name="'.concat(n.relations.targetCheckboxList,'"]'));if(r&&s&&a.length){var c=function(e){a.forEach((function(t){t.disabled=e,e&&(t.checked=!1)}))};c(s.checked),r.addEventListener("change",(function(){return c(!1)})),s.addEventListener("change",(function(){return c(!0)}))}}}})),this.options.checkBoxes&&Object.keys(this.options.checkBoxes).forEach((function(e){var n=t.options.checkBoxes[e];if("toggleDisabling"===n.behavior){var i=o.querySelectorAll('input[name="'.concat(e,'"]'));if(i.length){var r=Array.from(i).find((function(e){return e.value===n.relations.fullDayValue})),s=i.filter((function(e){return n.relations.disableOnChecked.includes(e.value)}));if(r&&s.length){var a=function(e){s.forEach((function(t){t.disabled=e,e&&(t.checked=!1)}))};a(r.checked),r.addEventListener("change",(function(){a(r.checked)}))}}}}))}},{key:"slugify",value:function(e){return e.toLowerCase().replace(/[\s]+/g,"-").replace(/[^\w-]+/g,"")}},{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}},{key:"sha256",value:(d=o(e().mark((function t(o){var n,i,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder,i=n.encode(o),e.next=4,crypto.subtle.digest("SHA-256",i);case 4:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),t)}))),function(e){return d.apply(this,arguments)})},{key:"pushToDataLayer",value:(u=o(e().mark((function t(o){var n,i,r,s,a,c,l=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},this.options.dataLayerTracking&&this.options.dataLayerConfig){e.next=3;break}return e.abrupt("return");case 3:if(this.form){e.next=6;break}return console.warn("⚠️ pushToDataLayer: Form is not initialized yet."),e.abrupt("return");case 6:if(i=this.options.dataLayerConfig,o){e.next=9;break}return e.abrupt("return");case 9:if(window.dataLayer=window.dataLayer||[],r={event:o,formID:this.formID},i.additionalData.includeReferrer&&(r.requestReferrerUrl=document.referrer||window.location.href),!i.additionalData.includeUserEmail){e.next=24;break}if(s=this.form.getFormElem()[0],!(a=s.querySelector('input[name="'.concat(i.additionalData.includeUserEmail,'"]')))||!a.value){e.next=24;break}if(c=a.value.trim().toLowerCase(),!i.additionalData.hashEmail){e.next=23;break}return e.next=20,this.sha256(c);case 20:r.userEmailHashed=e.sent,e.next=24;break;case 23:r.userEmail=c;case 24:Object.assign(r,n),window.dataLayer.push(r),this.options.debug&&console.log("DataLayer Event: ".concat(o),r);case 27:case"end":return e.stop()}}),t,this)}))),function(e){return u.apply(this,arguments)})},{key:"executeCustomBehaviorsOnFormReady",value:function(e){var t=this;this.options.customBehaviorsOnFormReady&&"object"===n(this.options.customBehaviorsOnFormReady)&&Object.keys(this.options.customBehaviorsOnFormReady).forEach((function(o){var n=t.options.customBehaviorsOnFormReady[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Ready: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Ready behavior "'.concat(o,'" is not a function.'))}))}},{key:"executeCustomBehaviorsOnFormSuccess",value:function(e){var t=this;this.options.customBehaviorsOnFormSuccess&&"object"===n(this.options.customBehaviorsOnFormSuccess)&&Object.keys(this.options.customBehaviorsOnFormSuccess).forEach((function(o){var n=t.options.customBehaviorsOnFormSuccess[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Success: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Success behavior "'.concat(o,'" is not a function.'))}))}},{key:"executeCustomBehaviorsOnFormPrefill",value:function(e){var t=this;this.options.customBehaviorsOnFormPrefill&&"object"===n(this.options.customBehaviorsOnFormPrefill)&&Object.keys(this.options.customBehaviorsOnFormPrefill).forEach((function(o){var n=t.options.customBehaviorsOnFormPrefill[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Prefill: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Prefill behavior "'.concat(o,'" is not a function.'))}))}}],l=[{key:"init",value:function(e,o,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s="".concat(e,"-").concat(o,"-").concat(n);if(null!==(i=window.__otoFormsLoaded)&&void 0!==i&&i.has(s))r.debug&&console.warn("⚠️ MarkeDough: Form ".concat(n," is already initialized. Skipping."));else{window.__otoFormsLoaded=window.__otoFormsLoaded||new Set,window.__otoFormsLoaded.add(s);var a=new t(e,o,n,r);a.init(),t.initializedForms.set(s,a)}}}],a&&c(s.prototype,a),l&&c(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,a,l,u,d}();u=h,d="initializedForms",f=new Map,(d=l(d))in u?Object.defineProperty(u,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[d]=f})();