/*! For license information please see markedough.min.js.LICENSE.txt */
(()=>{function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function _regeneratorRuntime(){return t};var e,t={},o=Object.prototype,n=o.hasOwnProperty,r=Object.defineProperty||function(e,t,o){e[t]=o.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function define(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function define(e,t,o){return e[t]=o}}function wrap(e,t,o,n){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),s=new Context(n||[]);return r(a,"_invoke",{value:makeInvokeMethod(e,o,s)}),a}function tryCatch(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}t.wrap=wrap;var c="suspendedStart",u="suspendedYield",d="executing",f="completed",p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};define(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(values([])));y&&y!==o&&n.call(y,a)&&(h=y);var v=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(o,r,i,a){var s=tryCatch(e[o],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==_typeof(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){invoke("next",e,i,a)}),(function(e){invoke("throw",e,i,a)})):t.resolve(c).then((function(e){l.value=e,i(l)}),(function(e){return invoke("throw",e,i,a)}))}a(s.arg)}var o;r(this,"_invoke",{value:function value(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,o){invoke(e,n,t,o)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,o,n){var r=c;return function(i,a){if(r===d)throw Error("Generator is already running");if(r===f){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=maybeInvokeDelegate(s,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var h=tryCatch(t,o,n);if("normal"===h.type){if(r=n.done?f:u,h.arg===p)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=f,n.method="throw",n.arg=h.arg)}}}function maybeInvokeDelegate(t,o){var n=o.method,r=t.iterator[n];if(r===e)return o.delegate=null,"throw"===n&&t.iterator.return&&(o.method="return",o.arg=e,maybeInvokeDelegate(t,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=tryCatch(r,t.iterator,o.arg);if("throw"===i.type)return o.method="throw",o.arg=i.arg,o.delegate=null,p;var a=i.arg;return a?a.done?(o[t.resultName]=a.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,p):a:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,p)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var o=t[a];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function next(){for(;++r<t.length;)if(n.call(t,r))return next.value=t[r],next.done=!1,next;return next.value=e,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,r(v,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),r(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,l,"GeneratorFunction")),e.prototype=Object.create(v),e},t.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,s,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(e,o,n,r,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(e,o,n,r),i);return t.isGeneratorFunction(o)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},defineIteratorMethods(v),define(v,l,"Generator"),define(v,a,(function(){return this})),define(v,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function next(){for(;o.length;){var e=o.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var o=this;function handle(n,r){return a.type="throw",a.arg=t,o.next=n,r&&(o.method="next",o.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),p}},catch:function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var r=n.arg;resetTryEntry(o)}return r}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(t,o,n){return this.delegate={iterator:values(t),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}function asyncGeneratorStep(e,t,o,n,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void o(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var i=e.apply(t,o);function _next(e){asyncGeneratorStep(i,n,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,r,_next,_throw,"throw",e)}_next(void 0)}))}}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,i,a,s=[],l=!0,c=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(n=i.call(o)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof(t)?t:t+""}!function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}(function(){"use strict";function MarkeDough(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MarkeDough),this.mktoDomain=e,this.mktoID=t,this.formID=o,this.options=n,this.form=null}return function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(MarkeDough,[{key:"init",value:function init(){this.attachMktoEvents()}},{key:"attachMktoEvents",value:function attachMktoEvents(){var e=this;if(!window.MktoForms2)return console.error("⚠️ MktoForms2 is not available. Retrying..."),void setTimeout((function(){return e.attachMktoEvents()}),500);MktoForms2.whenRendered((function(t){e.options.debug&&console.debug("✅ Form ".concat(e.formID," is rendered.")),e.onFormRendered(t)})),MktoForms2.whenReady((function(t){e.options.debug&&console.debug("✅ Form ".concat(e.formID," is fully loaded.")),e.onFormReady(t)}))}},{key:"onFormRendered",value:function onFormRendered(e){this.options.debug&&console.debug("⚡️ Running onFormRendered() modifications on ".concat(this.formID,"."))}},{key:"onFormReady",value:function onFormReady(e){var t=this;this.form=e,this.options.debug&&console.debug("⚡️ Running onFormReady() modifications on ".concat(this.formID,".")),this.formSubmitting=!1,this.formSubmitted=!1,this.cleanUpMktoElements(e),this.setupCSSReset(e),this.hideSpecifiedElements(e),this.addCssHelpers(e),this.hideLabelsForFields(e),this.processCheckboxOptions(),this.processRadioOptions(),this.replaceTokensInForm(e),this.initCustomLabels(e),this.refactorNumberInputs(e),this.options.dto?this.setupPrefill(e):this.setupUpIntlTelInput(e),this.processUrlParams(e),this.applyTranslations(e),this.setupUploadCare(e),this.executeCustomBehaviorsOnFormReady(e),this.showForm(e),this.setupDeactivation(e),this.options.dataLayerConfig.trackFormReady&&this.pushToDataLayer(this.options.dataLayerConfig.eventName+"Ready"),this.options.clearMunchkin&&this.form.addHiddenFields({_mkt_trk:"",mkt_tok:""}),e.onValidate((function(o){if(t.options.debug&&console.log("🚀 Validating form before submission..."),t.formSubmitting)console.warn("⚠️ Preventing duplicate validation.");else{t.formSubmitting=!0,e.submittable(!1);var n=[];if(t.options.intlTelInput&&t.options.intlTelInputFields&&Array.isArray(t.options.intlTelInputFields)){var r=e.getFormElem()[0];t.options.intlTelInputFields.forEach((function(e){var t=r.querySelector('[name="'.concat(e,'"]'));if(t&&t.intlTelInputInstance){var o=t.intlTelInputInstance.getNumber();console.debug("📞 Formatted Phone Number for ".concat(e,": ").concat(o)),t.value=o}else console.warn("⚠️ intlTelInput instance not found for: ".concat(e))}))}t.options.honeypot&&n.push(t.setupHoneypotValidation(e)),t.options.emailVerify&&n.push(t.setupEmailValidation(e)),Promise.all(n).then((function(o){if(!o.every((function(e){return e})))return console.error("⛔ Validation failed. Submission blocked."),void(t.formSubmitting=!1);console.log("✅ Final submittable state: true"),e.submittable(!0),setTimeout((function(){e.getFormElem()[0].checkValidity()?(t.options.debug&&console.log("✅ All validations passed, submitting form..."),e.getFormElem()[0].dispatchEvent(new Event("submit",{bubbles:!0}))):(console.warn("⚠️ Form still invalid, submission blocked."),t.formSubmitting=!1)}),100)})).catch((function(o){console.error("⚠️ Validation error:",o),e.submittable(!1),t.formSubmitting=!1}))}})),e.onSubmit((function(e){t.options.clearMunchkin&&t.form.vals({_mkt_trk:"",mkt_tok:""}),setTimeout((function(){t.submissionTriggered=!1}),500)})),e.onSuccess((function(o,n){if(t.formSubmitted)return console.warn("⚠️ Preventing duplicate success handling."),!1;if(t.formSubmitted=!0,t.options.debug&&console.log("🚀 Form submission successful. Handling follow-up..."),t.executeCustomBehaviorsOnFormSuccess(e),!t.options.followUp)return!0;if(t.options.followUpUrl)return console.log("🔗 Redirecting to follow-up URL: ".concat(t.options.followUpUrl)),setTimeout((function(){window.location.href=t.options.followUpUrl}),500),!1;if(t.options.followUpMsg){var r=e.getFormElem()[0];r.style.display="none";var i=document.createElement("div");return i.innerHTML=t.options.followUpMsg,r.parentElement.appendChild(i),console.log("Displayed follow-up message instead of redirection."),!1}}))}},{key:"hideForm",value:function hideForm(e){e.getFormElem()[0].style.display="none",this.options.debug&&console.debug("Form ".concat(this.formID," is now hidden."))}},{key:"showForm",value:function showForm(e){var t=e.getFormElem()[0];t.style.display="",t.parentElement&&t.parentElement.style.removeProperty("display"),this.options.debug&&console.debug("Form ".concat(this.formID," is now visible."))}},{key:"setupCSSReset",value:function setupCSSReset(e){if(this.options.cssReset){var t=e.getFormElem()[0];this.removeInlineStyles(t),this.disableMarketoStyles(t),this.removeEmbeddedStyles(t),this.removeMktoHasWidth(t),this.injectStylesheet(),this.options.moreStyles||t.setAttribute("data-style","oto"),this.observeMktoFormStyles(t),this.options.debug&&console.debug("CSS Reset applied to Form ".concat(this.formID))}}},{key:"injectStylesheet",value:function injectStylesheet(){var e=this;(this.options.cssStylesheet||this.options.cssStyle||this.options.cssInlineStyle)&&((this.options.cssStyle&&Object.keys(this.options.cssStyle).length>0||this.options.cssInlineStyle&&""!==this.options.cssInlineStyle.trim())&&this.injectCSSVariables(),Array.isArray(this.options.cssStylesheet)&&this.options.cssStylesheet.forEach((function(t){if(!document.querySelector('link[href="'.concat(t,'"]'))){var o=document.createElement("link");o.rel="stylesheet",o.href=t,document.head.appendChild(o),e.options.debug&&console.log("Applied external CSS: ".concat(t))}})))}},{key:"injectCSSVariables",value:function injectCSSVariables(){if(!document.getElementById("otoFormCustomStyles")){var e=":root {\n";if(this.options.cssStyle&&Object.keys(this.options.cssStyle).length>0)for(var t=0,o=Object.entries(this.options.cssStyle);t<o.length;t++){var n=_slicedToArray(o[t],2),r=n[0],i=n[1];e+="  --otoform-".concat(r,": ").concat(i,";\n")}e+="}",this.options.cssInlineStyle&&"string"==typeof this.options.cssInlineStyle&&""!==this.options.cssInlineStyle.trim()&&(e+="\n".concat(this.options.cssInlineStyle));var a=document.createElement("style");a.id="otoFormCustomStyles",a.textContent=e,document.head.appendChild(a),this.options.debug&&console.log("Injected CSS Variables & Inline Styles:",{variables:this.options.cssStyle,inlineStyles:this.options.cssInlineStyle})}}},{key:"removeEmbeddedStyles",value:function removeEmbeddedStyles(e){var t=e.querySelectorAll("style");t.forEach((function(e){return e.remove()})),this.options.debug&&console.debug("Removed ".concat(t.length," embedded <style> tags inside the form."))}},{key:"removeInlineStyles",value:function removeInlineStyles(e){Array.from(e.querySelectorAll("[style]")).forEach((function(e){e.closest(".mktoHtmlText")&&!e.classList.contains("mktoHtmlText")||e.removeAttribute("style")})),e.closest(".mktoHtmlText")||e.removeAttribute("style")}},{key:"removeMktoHasWidth",value:function removeMktoHasWidth(e){var t=e.querySelectorAll(".mktoHasWidth");e.classList.contains("mktoHasWidth")&&e.classList.remove("mktoHasWidth"),t.forEach((function(e){return e.classList.remove("mktoHasWidth")})),this.options.debug&&console.debug("Removed .mktoHasWidth from ".concat(t.length+(e.classList.contains("mktoHasWidth")?1:0)," elements."))}},{key:"disableMarketoStyles",value:function disableMarketoStyles(e){var t=this;try{Array.from(document.styleSheets).forEach((function(o){try{(o.href&&o.href.includes("forms2")||e.contains(o.ownerNode))&&(o.disabled=!0)}catch(e){t.options.debug&&console.warn("⚠️ Could not access stylesheet:",e)}}))}catch(e){this.options.debug&&console.warn("⚠️ Error disabling Marketo styles:",e)}}},{key:"addCssHelpers",value:function addCssHelpers(e){var t=this;if(this.options.cssReset){var o=e.getFormElem()[0];o.querySelectorAll("fieldset").forEach((function(e){var o=e.querySelector("legend");if(o&&o.textContent.trim()){var n=t.slugify(o.textContent.trim()),r=e.closest(".mktoFormRow"),i=e.closest(".mktoFormCol");r&&r.classList.add("otoform-row-fieldset-".concat(n)),i&&i.classList.add("otoform-col-fieldset-".concat(n)),t.options.debug&&console.log('Added fieldset class "otoform-row-fieldset-'.concat(n,'"'))}})),o.querySelectorAll(".mktoFormRow").forEach((function(e){if(!e.querySelector("fieldset")){var o=e.querySelectorAll("input, select, textarea"),n=new Set(_toConsumableArray(o).map((function(e){return t.slugify(e.name||"")})));n.size&&(e.classList.add("otoform-row-".concat(_toConsumableArray(n).join("-"))),t.options.debug&&console.log('Added class "otoform-row-'.concat(_toConsumableArray(n).join("-"),'" to row.')))}})),o.querySelectorAll(".mktoFormCol").forEach((function(e){if("fieldset"!==e.tagName.toLowerCase()){var o=e.querySelector("input, select, textarea");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-col-".concat(n)),t.options.debug&&console.log('Added class "otoform-col-'.concat(n,'" to column.')))}}})),o.querySelectorAll(".mktoFieldWrap").forEach((function(e){var o=e.querySelector("input, select, textarea");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-field-".concat(n)),t.options.debug&&console.log('Added class "otoform-field-'.concat(n,'" to field wrapper.')))}})),o.querySelectorAll(".mktoCheckboxList").forEach((function(e){var o=e.querySelector("input[type='checkbox']");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-checkboxlist-".concat(n)),t.options.debug&&console.log('Added class "otoform-checkboxlist-'.concat(n,'" to checkbox list.')))}})),o.querySelectorAll(".mktoRadioList").forEach((function(e){var o=e.querySelector("input[type='radio']");if(o){var n=t.slugify(o.name||"");n&&(e.classList.add("otoform-radiolist-".concat(n)),t.options.debug&&console.log('Added class "otoform-radiolist-'.concat(n,'" to radio list.')))}})),o.querySelectorAll(".mktoCheckboxList").forEach((function(e){var o=e.querySelectorAll("label");if(Array.from(o).some((function(e){return""===e.textContent.trim()&&""===e.innerHTML.trim()}))){var n=e.closest(".mktoFieldWrap");n&&(n.classList.add("otoform-single-checkbox"),t.options.debug&&console.log('Added class "otoform-single-checkbox" to field wrap.'))}})),this.options.debug&&console.log("CSS helpers added to form.")}}},{key:"observeMktoFormStyles",value:function observeMktoFormStyles(e){var t=this;new MutationObserver((function(o){o.forEach((function(o){"style"===o.attributeName&&e.style.width&&(e.style.removeProperty("width"),t.options.debug&&console.debug("Removed inline width style from .mktoForm"))}))})).observe(e,{attributes:!0,attributeFilter:["style"]}),this.options.debug&&console.debug("MutationObserver started to prevent Marketo from injecting inline width.")}},{key:"setupUpIntlTelInput",value:function setupUpIntlTelInput(e){var t=this;if(this.options.intlTelInput)if("function"==typeof window.intlTelInput){var o=e.getFormElem()[0],n=this.options.intlTelInputConfig||{},r=function toBool(e){return"1"===e||1===e||!0===e},i={initialCountry:n.initialCountry||"auto",strictMode:r(n.strictMode),nationalMode:r(n.nationalMode),geoIpLookup:r(n.geoIpLookup)?function(e){fetch(n.geoIpLookupApi||"https://ipinfo.io/json?token=InsertApiKeyHere").then((function(e){return e.json()})).then((function(t){e(t[n.geoIpLookupApiResponseKey]||n.geoIpLookupApiResponseFallback||"us")})).catch((function(){e(n.geoIpLookupApiResponseFallback||"us")}))}:null,allowDropdown:r(n.allowDropdown),showFlags:r(n.showFlags),separateDialCode:r(n.separateDialCode)};if(this.options.debug&&console.log("IntlTelInput configuration:",i),this.options.intlTelInputFields&&Array.isArray(this.options.intlTelInputFields)&&this.options.intlTelInputFields.forEach((function(e){var n=o.querySelector('[name="'.concat(e,'"]'));n?(n.intlTelInputInstance=window.intlTelInput(n,i),t.options.debug&&console.log("intlTelInput initialized for field: ".concat(e))):t.options.debug&&console.warn("Field not found for intlTelInput: ".concat(e))})),n.CountrySync&&n.CountrySyncSelector){var a=o.querySelector('[name="'.concat(n.CountrySyncSelector,'"]'));if(a){var s=window.intlTelInput.getCountryData();a.innerHTML="",s.forEach((function(e){var t=document.createElement("option");t.value=e.iso2,t.text=e.name,a.appendChild(t)}));var l=this.options.intlTelInputFields[0],c=o.querySelector('[name="'.concat(l,'"]'));if(c&&c.intlTelInputInstance){var u=c.intlTelInputInstance;a.value=u.getSelectedCountryData().iso2,c.addEventListener("countrychange",(function(){a.value=u.getSelectedCountryData().iso2})),a.addEventListener("change",(function(){u.setCountry(a.value)}))}}else this.options.debug&&console.warn("Country Sync Selector element not found: ".concat(n.CountrySyncSelector))}}else this.options.debug&&console.error("intlTelInput library not loaded.")}},{key:"setupUploadCare",value:function setupUploadCare(e){if(this.options.uploadCare){this.options.debug&&console.log("⚡️ Setting up UploadCare");var t=e.getFormElem()[0];if(this.options.uploadCareTarget){var o=this.options.uploadCareTarget,n=function decodeHTMLEntities(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(this.options.uploadCareConfig),r=t.querySelector('[name="'.concat(o,'"]'));if(r.classList.add("oto-visually-hidden"),(null==r?void 0:r.closest(".mktoFieldWrap")).classList.add("oto-force-space-bottom"),!document.querySelector("uc-file-uploader-minimal")||!document.querySelector("uc-file-uploader-regular")){var i,a=document.createElement("div");a.classList.add("mktoFormRow"),a.classList.add("otoform-row-uploadcare"),a.innerHTML="".concat(n,'<uc-upload-ctx-provider ctx-name="my-uploader"></uc-upload-ctx-provider>');var s=null===(i=t.querySelector('[name="'.concat(o,'"]')))||void 0===i?void 0:i.closest(".mktoFormRow");s?s.insertAdjacentElement("afterend",a):t.insertAdjacentElement("afterend",a)}var l=document.querySelector("uc-upload-ctx-provider[ctx-name='my-uploader']");if(!l)return void console.error("Uploadcare context provider element not found!");l.addEventListener("common-upload-success",(function(e){var t=e.detail.successEntries;if(t&&0!==t.length){var o=t.map((function(e){return e.cdnUrl}));console.log("Files Uploaded:",o),r.value=o.join(", ")}}))}}}},{key:"setupDeactivation",value:function setupDeactivation(e){if(this.options.deactivate){var t=e.getFormElem()[0],o=t.parentElement;if(t.style.display="none",this.options.deactivateMessage){var n=document.createElement("div");n.innerHTML=this.options.deactivateMessage,o.appendChild(n)}this.options.debug&&console.debug("Form ".concat(this.formID," is deactivated and replaced with a message."))}}},{key:"setupPrefill",value:function setupPrefill(e){var t=this;if(this.options.dto){var o=this.options.dtoSrc,n=this.options.dtoOriginUrl,r=this.options.dtoTargetUrls;if(o&&n&&r&&Array.isArray(r)){this.options.debug&&console.log("Initializing SimpleDTO for form prefill...");var i=new SimpleDTO({debug:this.options.debug,mode:"receive",transport:"message",messageSource:n,messageTarget:r,dataSrc:o,cb:function cb(o,n){t.options.debug&&console.debug("🗂️ Marketo Fields received:",n),e.setValuesCoerced(n),t.onPrefillReadyTriggerLeadActions(e,n),i.cleanup()}})}else this.options.debug&&console.warn("⚠️ DTO configuration is incomplete. Prefill aborted.")}}},{key:"onPrefillReadyTriggerLeadActions",value:function onPrefillReadyTriggerLeadActions(e,t){this.options.debug&&console.log("⚡️Lead actions triggered after DTO prefill"),this.setupUpIntlTelInput(e),this.executeCustomBehaviorsOnFormPrefill(e),this.options.notYou&&t.Email&&this.setupNotYouButton()}},{key:"setupEmailValidation",value:function setupEmailValidation(e){var t=this;return new Promise((function(o){if(!t.options.emailVerify||!t.options.emailVerifyAPI)return o(!0);var n=t.options.emailVerifyAPI,r=n.fieldName||"Email",i=e.getFormElem()[0].querySelector('[name="'.concat(r,'"]'));if(!i)return t.options.debug&&console.warn("⚠️ Email field not found: ".concat(r)),o(!0);if(!i.value||!i.value.includes("@")||!i.value.includes("."))return t.markInvalid(i,"Invalid email format."),o(!1);var a=t,s=Object.keys(n.action)[0]||"verify",l=n.action[s]||{},c={checkMX:"checkmx",checkCustomBlacklist:"checkblacklist",checkFreeEmails:"checkfreelist",checkDisposableEmails:"checkdisposablelist",checkWhitelist:"checkwhitelist"},u=Object.entries(l).filter((function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];return void 0!==c[o]&&"boolean"==typeof n})).map((function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];return"".concat(c[o],"=").concat(n?"true":"false")})).join("&"),d="".concat(n.endpoint,"?key=").concat(n.hash,"&action=").concat(s,"&").concat(u,"&eml=").concat(encodeURIComponent(i.value)),f=new XMLHttpRequest;f.open("GET",d,!0),f.responseType="json",f.onload=function(){if(200===f.status){var t=f.response;if(console.debug("🚀 Email Validation API Response: ".concat(JSON.stringify(t,null,2))),t&&Array.isArray(t)&&t.length>0){var n=t[0];"1"===n.valid?(e.submittable(!0),a.markValid(i),o(!0)):(console.error("🚨 Invalid Email Detected: ".concat(n.msg)),e.submittable(!1),a.markInvalid(i,n.msg),o(!1))}else console.error("⚠️ Invalid API response format:",t),o(!0)}else console.error("⚠️ Validation API error:",f.status,f.statusText),o(!0)},f.onerror=function(){console.error("⚠️ Network error during email validation."),o(!0)},f.send()}))}},{key:"validateEmailField",value:function validateEmailField(e,t){var o=this;return new Promise((function(n){if(!e.value||!e.value.includes("@")||!e.value.includes("."))return o.markInvalid(e,"Invalid email format."),t.submittable(!1),n(!1);var r=o,i=o.options.emailVerifyAPI,a=Object.keys(i.action)[0]||"verify",s=i.action[a]||{},l={checkMX:"checkmx",checkCustomBlacklist:"checkblacklist",checkFreeEmails:"checkfreelist",checkDisposableEmails:"checkdisposablelist",checkWhitelist:"checkwhitelist"},c=Object.entries(s).filter((function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];return void 0!==l[o]&&"boolean"==typeof n})).map((function(e){var t=_slicedToArray(e,2),o=t[0],n=t[1];return"".concat(l[o],"=").concat(n?"true":"false")})).join("&"),u="".concat(i.endpoint,"?key=").concat(i.hash,"&action=").concat(a,"&").concat(c,"&eml=").concat(encodeURIComponent(e.value)),d=new XMLHttpRequest;d.open("GET",u,!0),d.responseType="json",d.onload=function(){if(200===d.status){var o;try{o=d.response}catch(e){return console.error("❌ JSON Parsing Error:",e),t.submittable(!1),n(!1)}if(console.debug("🚀 Email Validation API Response:",JSON.stringify(o,null,2)),o&&Array.isArray(o)&&o.length>0){var i=o[0];"1"===i.valid?(r.markValid(e),t.submittable(!0),n(!0)):(console.warn("🚨 Invalid Email Detected:",i.msg),r.markInvalid(e,i.msg||"Please enter a valid company email."),t.submittable(!1),n(!1))}else console.error("❌ Unexpected API Response Format:",o),t.submittable(!1),n(!1)}else console.error("❌ API Request Failed:",d.status,d.statusText),t.submittable(!1),n(!1)},d.onerror=function(){console.error("❌ Network Error During Email Validation."),t.submittable(!1),n(!1)},d.send()}))}},{key:"setupErrorHideEvents",value:function setupErrorHideEvents(){var e=document.querySelector(".mktoForm");if(e){var t=function hideErrors(){e.querySelectorAll(".mktoError").forEach((function(e){e.style.opacity="0",setTimeout((function(){return e.remove()}),300)})),e.querySelectorAll(".customInvalid").forEach((function(e){e.classList.remove("customInvalid","mktoInvalid")})),e.removeEventListener("click",t)};e.addEventListener("click",t)}}},{key:"markValid",value:function markValid(e){e.classList.remove("customInvalid","mktoInvalid"),e.classList.add("mktoValid"),e.setAttribute("aria-invalid","false"),MktoForms2.$(e).siblings(".mktoError").remove(),this.options.debug&&console.log("Validation passed for ".concat(e.name))}},{key:"markInvalid",value:function markInvalid(e,t){var o=this;e.classList.add("customInvalid","mktoInvalid"),e.classList.remove("mktoValid"),e.setAttribute("aria-invalid","true");var n=e.parentElement.querySelector(".mktoError");n&&n.remove();var r=document.createElement("div");r.classList.add("mktoError"),r.style.opacity="0",r.style.transition="opacity 0.3s ease-in-out";var i=document.createElement("div");i.classList.add("mktoErrorArrowWrap");var a=document.createElement("div");a.classList.add("mktoErrorArrow");var s=document.createElement("div");s.classList.add("mktoErrorMsg"),s.setAttribute("id","ValidMsgTitle"),s.setAttribute("role","alert"),s.setAttribute("tabindex","-1"),s.textContent=t,i.appendChild(a),r.appendChild(i),r.appendChild(s),e.parentElement.appendChild(r),requestAnimationFrame((function(){e.getBoundingClientRect(),r.getBoundingClientRect();r.style.position="absolute",r.style.top="".concat(e.offsetTop+e.offsetHeight+5,"px"),r.style.left="".concat(e.offsetLeft+e.offsetWidth/2,"px"),r.style.transform="translateX(-50%)",r.style.zIndex="10",requestAnimationFrame((function(){r.style.opacity="1"})),o.options.debug&&console.warn("Validation failed: ".concat(t))})),this.setupErrorHideEvents()}},{key:"hideSpecifiedElements",value:function hideSpecifiedElements(e){var t=this,o=e.getFormElem()[0];(this.options.hideFields&&Array.isArray(this.options.hideFields)&&this.options.hideFields.forEach((function(e){var n=o.querySelector('[name="'.concat(e,'"]'));if(n){var r=n.closest(".mktoFormRow");r&&(r.classList.add("oto-hidden"),t.options.debug&&console.log("⚡️ Hiding row for field: ".concat(e)))}else t.options.debug&&console.warn("Field not found for hiding: ".concat(e))})),this.options.hideFieldsets&&Array.isArray(this.options.hideFieldsets)&&this.options.hideFieldsets.forEach((function(e){o.querySelectorAll("legend").forEach((function(o){if(o.textContent.trim().toLowerCase()===e.toLowerCase()){var n=o.closest(".mktoFormRow");n&&(n.classList.add("oto-hidden"),t.options.debug&&console.log('⚡️ Hiding fieldset with legend: "'.concat(e,'"')))}}))})),this.options.hideLegends)&&o.querySelectorAll("legend").forEach((function(e){e&&(e.classList.add("oto-hidden"),t.options.debug&&console.log('⚡️ Hiding legend: "'.concat(e.textContent.trim(),'"')))}))}},{key:"hideLabelsForFields",value:function hideLabelsForFields(e){var t=this;if(this.options.hideLabels&&Array.isArray(this.options.hideLabels)){var o=e.getFormElem()[0];this.options.hideLabels.forEach((function(e){var n;switch(e){case"text":case"url":case"number":case"email":case"tel":case"date":case"textarea":n='input[type="'.concat(e,'"], textarea'),o.querySelectorAll(n).forEach((function(e){t.hideLabelForInput(e)}));break;case"select":n="select",o.querySelectorAll(n).forEach((function(e){t.hideLabelForInput(e)}));break;case"checkboxlist":o.querySelectorAll(".mktoCheckboxList").forEach((function(e){t.hideAssociatedLabel(e)}));break;case"radiolist":o.querySelectorAll(".mktoRadioList").forEach((function(e){t.hideAssociatedLabel(e)}));break;default:return}}))}}},{key:"hideLabelForInput",value:function hideLabelForInput(e){var t=e.id?document.querySelector('label[for="'.concat(e.id,'"]')):null;t&&(t.classList.add("visually-hidden"),this.options.debug&&console.log("⚡️ Hiding label for input:",e.name))}},{key:"hideAssociatedLabel",value:function hideAssociatedLabel(e){var t,o=e.querySelector("input");if(o&&o.name){var n=null===(t=e.closest(".mktoFieldWrap"))||void 0===t?void 0:t.querySelector('label[for="'.concat(o.name,'"]'));n&&(n.classList.add("visually-hidden"),this.options.debug&&console.log("⚡️ Hiding label for list with name:",o.name))}}},{key:"setupHoneypotValidation",value:function setupHoneypotValidation(e){var t=this;return new Promise((function(o){var n=t.options.honeypot;if(!n)return o(!0);var r=e.getFormElem()[0].querySelector('[name="'.concat(n,'"]'));if(!r)return t.options.debug&&console.warn("⚠️ Honeypot field not found: ".concat(n)),o(!0);""===r.value.trim()?(t.options.debug&&console.log("✅ Honeypot validation passed (empty field)."),o(!0)):(t.options.debug&&console.warn("🚨 Honeypot triggered! Submission blocked."),o(!1))}))}},{key:"setupNotYouButton",value:function setupNotYouButton(){var e=this;if(this.options.notYou&&this.options.notYouHtml&&this.options.notYouAfterElem){var t=document.querySelector(this.options.notYouAfterElem);if(t){var o=document.createElement("div");o.innerHTML=this.options.notYouHtml,t.insertAdjacentElement("afterend",o),this.options.debug&&console.log('⚡️ Injected "Not You?" button after: '.concat(this.options.notYouAfterElem));var n=document.querySelector("#not-you-button");n&&n.addEventListener("click",(function(t){t.preventDefault(),e.notYouHandler()}))}else this.options.debug&&console.warn('⚠️ Target element for "Not You?" not found: '.concat(this.options.notYouAfterElem))}}},{key:"notYouHandler",value:function notYouHandler(){this.options.debug&&console.log("⚡️ Not You? button clicked. Clearing Marketo tracking cookie."),FormsPlus.util.DNS.climbDomains([],(function(e){FormsPlus.util.Cookies.remove(FormsPlus.strings.MARKETO_TRACKING_COOKIE,{domain:e,path:"/"})}));var e=new FormsPlus.util.URI.URI;e.removeSearch([FormsPlus.strings.MARKETO_EMAIL_ASSOCIATOR_TOKEN,FormsPlus.strings.MARKETO_FORM_DATA_CACHE]),document.location.href=e}},{key:"refactorNumberInputs",value:function refactorNumberInputs(e){var t=this;if(this.options.numberRefactore&&this.options.numberRefactoreItems){var o=e.getFormElem()[0];Object.entries(this.options.numberRefactoreItems).forEach((function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1],a=o.querySelector('input[name="'.concat(r,'"][type="number"]'));if(a){var s="any"===i?"any":parseFloat(i)||1,l=a.getAttribute("min")||"",c=a.getAttribute("max")||"",u=a.value||"",d=document.createElement("span");d.classList.add("oto-num-stepper");var f=document.createElement("button");f.setAttribute("type","button"),f.textContent="−",f.addEventListener("click",(function(){return t.stepperInput(a,-s,l)}));var p=document.createElement("button");p.setAttribute("type","button"),p.textContent="+",p.addEventListener("click",(function(){return t.stepperInput(a,s,c)})),a.setAttribute("step",s),a.setAttribute("min",l),a.setAttribute("max",c),a.setAttribute("readonly","true"),a.value=u,a.parentNode.insertBefore(d,a),d.appendChild(f),d.appendChild(a),d.appendChild(p),t.options.debug&&console.log('✅ Refactored number input "'.concat(r,'" with step ').concat(s,"."))}else t.options.debug&&console.warn('⚠️ Number input "'.concat(r,'" not found.'))}))}}},{key:"stepperInput",value:function stepperInput(e,t,o){var n=parseFloat(e.value)||0,r=("any"===e.getAttribute("step")||parseFloat(e.getAttribute("step")),e.getAttribute("min")?parseFloat(e.getAttribute("min")):-1/0),i=e.getAttribute("max")?parseFloat(e.getAttribute("max")):1/0,a=n+t;a<r&&(a=r),a>i&&(a=i),e.value=a}},{key:"processRadioOptions",value:function processRadioOptions(){var e=this,t=document.querySelector(".mktoForm");if(t)return!this.options.radios||Array.isArray(this.options.radios)&&0===this.options.radios.length?(t.querySelectorAll(".mktoRadioList").forEach((function(e){e.classList.contains("otoform-default-radios")||e.classList.add("otoform-default-radios")})),void(this.options.debug&&console.warn("⚠️ No specific radio configurations found. Applied 'otoform-default-radios' to all radio lists."))):void Object.keys(this.options.radios).forEach((function(o){var n=e.options.radios[o],r=t.querySelectorAll('input[name="'.concat(o,'"]'));0!==r.length?r.forEach((function(t){var r=t.closest(".mktoRadioList");r&&(n.style||n.inline||r.classList.add("otoform-default-radios"),n.inline&&r.classList.add("otoform-inline-radios"),"tabs"===n.style?r.classList.add("otoform-tabs-radios"):"square"===n.style?r.classList.add("otoform-square-radios"):r.classList.add("otoform-default-radios"),e.options.debug&&console.log('⚡️ Processed radio group "'.concat(o,'" with style: ').concat(n.style||"default")))})):e.options.debug&&console.warn("⚠️ No radios found for group: ".concat(o))}))}},{key:"processCheckboxOptions",value:function processCheckboxOptions(){var e=this,t=document.querySelector(".mktoForm");if(t)return!this.options.checkBoxes||Array.isArray(this.options.checkBoxes)&&0===this.options.checkBoxes.length?(t.querySelectorAll(".mktoCheckboxList").forEach((function(e){e.classList.contains("otoform-default-checkboxes")||e.classList.add("otoform-default-checkboxes")})),void(this.options.debug&&console.warn("⚠️ No specific checkbox configurations found. Applied 'otoform-default-checkboxes' to all checkbox lists."))):void Object.keys(this.options.checkBoxes).forEach((function(o){var n=e.options.checkBoxes[o],r=t.querySelectorAll('input[name="'.concat(o,'"]'));0!==r.length?r.forEach((function(t){var r=t.closest(".mktoCheckboxList");r&&(n.style||n.inline||n.behavior||r.classList.add("otoform-default-checkboxes"),n.inline&&r.classList.add("otoform-inline-checkboxes"),"round"===n.style||"square"===n.style?e.initSwitches(t,n.style):r.classList.add("otoform-default-checkboxes"),"actAsRadio"===n.behavior&&e.initializeCheckboxGroupAsRadio(o))})):e.options.debug&&console.warn("⚠️ No checkboxes found for group: ".concat(o))}))}},{key:"initSwitches",value:function initSwitches(e,t){var o=e.closest(".mktoCheckboxList");if(o){o.classList.contains("otoform-switches")?o.classList.add("otoform-classic"):o.classList.add("otoform-switches");var n=document.createElement("label");n.classList.add("otoform-switch"),e.parentNode.insertBefore(n,e),n.appendChild(e);var r=document.createElement("span");r.classList.add("otoform-slider","otoform-slider-".concat(t)),n.appendChild(r),this.options.debug&&console.log("Applied ".concat(t," switch styling to checkbox:"),e.name)}}},{key:"initializeCheckboxGroupAsRadio",value:function initializeCheckboxGroupAsRadio(e){var t=document.querySelectorAll('input[name="'.concat(e,'"]'));if(0!==t.length){t.forEach((function(e){e.addEventListener("click",(function(){t.forEach((function(t){t!==e&&(t.checked=!1)}))}))}));var o=Array.from(t).find((function(e){return e.checked}));o&&t.forEach((function(e){e!==o&&(e.checked=!1)})),this.options.debug&&console.log("Initialized radio-like behavior for checkbox group: ".concat(e))}}},{key:"replaceTokensInForm",value:function replaceTokensInForm(e){var t=this;this.options.updateTokens&&"object"===_typeof(this.options.updateTokens)&&e.getFormElem()[0].querySelectorAll("*:not(script):not(style)").forEach((function(e){Object.keys(t.options.updateTokens).forEach((function(o){var n=t.options.updateTokens[o];1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.includes(o)&&(e.textContent=e.textContent.replace(o,n),t.options.debug&&console.log('Replaced token "'.concat(o,'" in element:'),e)),e.hasAttribute("value")&&e.getAttribute("value").includes(o)&&(e.setAttribute("value",e.getAttribute("value").replace(o,n)),t.options.debug&&console.log('Replaced token "'.concat(o,'" in input value:'),e)),e.hasAttribute("placeholder")&&e.getAttribute("placeholder").includes(o)&&(e.setAttribute("placeholder",e.getAttribute("placeholder").replace(o,n)),t.options.debug&&console.log('Replaced token "'.concat(o,'" in placeholder:'),e))}))}))}},{key:"initCustomLabels",value:function initCustomLabels(e){var t=this;if(this.options.customLabels&&"object"===_typeof(this.options.customLabels)){var o=e.getFormElem()[0];Object.entries(this.options.customLabels).forEach((function(e){var n=_slicedToArray(e,2),r=n[0],i=n[1];if(r&&i){var a=o.querySelector('label[for="'.concat(r,'"]'));a?(a.innerHTML=i,t.options.debug&&console.log('Updated label for "'.concat(r,'" with custom content.'))):t.options.debug&&console.warn('Label with for="'.concat(r,'" not found.'))}}))}}},{key:"applyTranslations",value:function applyTranslations(e){var t=this;if(this.options.translate&&"json"===this.options.translate){var o=document.documentElement.lang||"en",n="".concat(this.options.translateJson.folder).concat(o,".json");this.options.debug&&console.log("Loading translations from: ".concat(n)),fetch(n).then((function(e){return e.json()})).then((function(e){Object.keys(e).forEach((function(o){document.querySelectorAll(o).forEach((function(n){["INPUT","TEXTAREA"].includes(n.tagName)||(n.textContent=e[o],t.options.debug&&console.log("Translated ".concat(o,' → "').concat(e[o],'"'))),n.hasAttribute("placeholder")&&e[o].placeholder&&(n.setAttribute("placeholder",e[o].placeholder),t.options.debug&&console.log("Translated placeholder for ".concat(o,' → "').concat(e[o].placeholder,'"')))}))})),t.options.debug&&console.log("Translations applied for language: ".concat(o))})).catch((function(e){console.error("Failed to load translations: ".concat(e))}))}}},{key:"cleanUpMktoElements",value:function cleanUpMktoElements(e){var t=this;if(Array.isArray(this.options.removeElems)&&0!==this.options.removeElems.length){var o=e.getFormElem()[0];this.options.removeElems.forEach((function(e){var n=o.querySelectorAll(e);n.forEach((function(e){return e.remove()})),t.options.debug&&n.length&&console.log("Removed ".concat(n.length,' elements matching: "').concat(e,'"'))}))}}},{key:"processUrlParams",value:function processUrlParams(e){var t=this;if(this.options.urlParamsToHiddenFields){var o=this.options.urlParamsToHiddenFieldsConfig;if(o&&"object"===_typeof(o)){var n=e.getFormElem()[0],r=new URLSearchParams(window.location.search),i={};Object.entries(o.mapping).forEach((function(e){var n=_slicedToArray(e,2),a=n[0],s=n[1];if(!o.excludeList.includes(a)){var l=null;if(o.cookiesFirst&&o.cookiesFirst.prefix){var c="".concat(o.cookiesFirst.prefix).concat(a);l=t.getCookie(c)}l||(l=r.get(a)),l&&(i[s]=l)}})),Object.entries(i).forEach((function(e){var o=_slicedToArray(e,2),r=o[0],i=o[1],a=n.querySelector('input[name="'.concat(r,'"]'));a||((a=document.createElement("input")).type="hidden",a.name=r,n.appendChild(a)),a.value=i,t.options.debug&&console.log('Set hidden field "'.concat(r,'" with value: ').concat(i))}))}}}},{key:"setupToggleDisabling",value:function setupToggleDisabling(e){var t=this,o=e.getFormElem()[0];this.options.radios&&Object.keys(this.options.radios).forEach((function(e){var n=t.options.radios[e];if("toggleDisabling"===n.behavior){var r=o.querySelectorAll('input[name="'.concat(e,'"]'));if(r.length){var i=Array.from(r).find((function(e){return e.value===n.relations.yesValue})),a=Array.from(r).find((function(e){return e.value===n.relations.noValue})),s=o.querySelectorAll('input[name="'.concat(n.relations.targetCheckboxList,'"]'));if(i&&a&&s.length){var l=function toggleCheckboxes(e){s.forEach((function(t){t.disabled=e,e&&(t.checked=!1)}))};l(a.checked),i.addEventListener("change",(function(){return l(!1)})),a.addEventListener("change",(function(){return l(!0)}))}}}})),this.options.checkBoxes&&Object.keys(this.options.checkBoxes).forEach((function(e){var n=t.options.checkBoxes[e];if("toggleDisabling"===n.behavior){var r=o.querySelectorAll('input[name="'.concat(e,'"]'));if(r.length){var i=Array.from(r).find((function(e){return e.value===n.relations.fullDayValue})),a=r.filter((function(e){return n.relations.disableOnChecked.includes(e.value)}));if(i&&a.length){var s=function toggleDependentCheckboxes(e){a.forEach((function(t){t.disabled=e,e&&(t.checked=!1)}))};s(i.checked),i.addEventListener("change",(function(){s(i.checked)}))}}}}))}},{key:"slugify",value:function slugify(e){return e.toLowerCase().replace(/[\s]+/g,"-").replace(/[^\w-]+/g,"")}},{key:"getCookie",value:function getCookie(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}},{key:"sha256",value:(t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e){var t,o,n;return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=new TextEncoder,o=t.encode(e),r.next=4,crypto.subtle.digest("SHA-256",o);case 4:return n=r.sent,r.abrupt("return",Array.from(new Uint8Array(n)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return r.stop()}}),_callee)}))),function sha256(e){return t.apply(this,arguments)})},{key:"pushToDataLayer",value:(e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(e){var t,o,n,r,i,a,s=arguments;return _regeneratorRuntime().wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>1&&void 0!==s[1]?s[1]:{},this.options.dataLayerTracking&&this.options.dataLayerConfig){l.next=3;break}return l.abrupt("return");case 3:if(this.form){l.next=6;break}return console.warn("⚠️ pushToDataLayer: Form is not initialized yet."),l.abrupt("return");case 6:if(o=this.options.dataLayerConfig,e){l.next=9;break}return l.abrupt("return");case 9:if(window.dataLayer=window.dataLayer||[],n={event:e,formID:this.formID},o.additionalData.includeReferrer&&(n.requestReferrerUrl=document.referrer||window.location.href),!o.additionalData.includeUserEmail){l.next=24;break}if(r=this.form.getFormElem()[0],!(i=r.querySelector('input[name="'.concat(o.additionalData.includeUserEmail,'"]')))||!i.value){l.next=24;break}if(a=i.value.trim().toLowerCase(),!o.additionalData.hashEmail){l.next=23;break}return l.next=20,this.sha256(a);case 20:n.userEmailHashed=l.sent,l.next=24;break;case 23:n.userEmail=a;case 24:Object.assign(n,t),window.dataLayer.push(n),this.options.debug&&console.log("DataLayer Event: ".concat(e),n);case 27:case"end":return l.stop()}}),_callee2,this)}))),function pushToDataLayer(t){return e.apply(this,arguments)})},{key:"executeCustomBehaviorsOnFormReady",value:function executeCustomBehaviorsOnFormReady(e){var t=this;this.options.customBehaviorsOnFormReady&&"object"===_typeof(this.options.customBehaviorsOnFormReady)&&Object.keys(this.options.customBehaviorsOnFormReady).forEach((function(o){var n=t.options.customBehaviorsOnFormReady[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Ready: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Ready behavior "'.concat(o,'" is not a function.'))}))}},{key:"executeCustomBehaviorsOnFormSuccess",value:function executeCustomBehaviorsOnFormSuccess(e){var t=this;this.options.customBehaviorsOnFormSuccess&&"object"===_typeof(this.options.customBehaviorsOnFormSuccess)&&Object.keys(this.options.customBehaviorsOnFormSuccess).forEach((function(o){var n=t.options.customBehaviorsOnFormSuccess[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Success: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Success behavior "'.concat(o,'" is not a function.'))}))}},{key:"executeCustomBehaviorsOnFormPrefill",value:function executeCustomBehaviorsOnFormPrefill(e){var t=this;this.options.customBehaviorsOnFormPrefill&&"object"===_typeof(this.options.customBehaviorsOnFormPrefill)&&Object.keys(this.options.customBehaviorsOnFormPrefill).forEach((function(o){var n=t.options.customBehaviorsOnFormPrefill[o];"function"==typeof n?(t.options.debug&&console.log("🔹 Executing custom behavior On Form Prefill: ".concat(o)),n(e)):console.warn('⚠️ Custom On Form Prefill behavior "'.concat(o,'" is not a function.'))}))}}],[{key:"init",value:function init(e,t,o){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i="".concat(e,"-").concat(t,"-").concat(o);if(null!==(n=window.__otoFormsLoaded)&&void 0!==n&&n.has(i))r.debug&&console.warn("⚠️ MarkeDough: Form ".concat(o," is already initialized. Skipping."));else{window.__otoFormsLoaded=window.__otoFormsLoaded||new Set,window.__otoFormsLoaded.add(i);var a=new MarkeDough(e,t,o,r);a.init(),MarkeDough.initializedForms.set(i,a)}}}]);var e,t}(),"initializedForms",new Map)})();